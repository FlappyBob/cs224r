# å®éªŒæ—¥å¿—ç›®å½•è¯´æ˜

## ğŸ“ ç›®å½•ç»“æ„

æ¯ä¸ªå®éªŒè¿è¡Œåä¼šåˆ›å»ºä¸€ä¸ªæ—¥å¿—ç›®å½•ï¼Œæ ¼å¼ä¸ºï¼š
```
data/q1_bc_ant_Ant-v4_03-01-2026_12-49-49/
â””â”€â”€ events.out.tfevents.1767415789.autodl-container-773d4a9781-b6c65762
```

## ğŸ“Š ç›®å½•å†…å®¹

### 1. **TensorBoard äº‹ä»¶æ–‡ä»¶**
- **æ–‡ä»¶å**ï¼š`events.out.tfevents.*`
- **æ ¼å¼**ï¼šTensorBoard äºŒè¿›åˆ¶æ ¼å¼
- **ä½œç”¨**ï¼šè®°å½•è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ‰€æœ‰æŒ‡æ ‡

### 2. **ä¸ºä»€ä¹ˆåªæœ‰ä¸€ä¸ªæ•°æ®ç‚¹ï¼ˆä¸æ˜¯æ›²çº¿ï¼‰ï¼Ÿ**

è¿™æ˜¯ **Behavior Cloning çš„ç‰¹ç‚¹**ï¼š

```python
# åœ¨ run_hw1.py ä¸­
--n_iter 1  # åªè¿è¡Œ 1 æ¬¡è¿­ä»£
```

**åŸå› åˆ†æ**ï¼š

1. **BC çš„è®­ç»ƒæµç¨‹**ï¼š
   ```
   è¿­ä»£ 0:
   â”œâ”€ åŠ è½½ä¸“å®¶æ•°æ®
   â”œâ”€ è®­ç»ƒç­–ç•¥ï¼ˆ1000 æ­¥æ¢¯åº¦æ›´æ–°ï¼‰
   â””â”€ è®°å½•ä¸€æ¬¡æœ€ç»ˆæ€§èƒ½æŒ‡æ ‡ â† è¿™å°±æ˜¯ä½ çœ‹åˆ°çš„é‚£ä¸ªç‚¹
   ```

2. **ä»£ç é€»è¾‘**ï¼ˆ`bc_trainer.py`ï¼‰ï¼š
   ```python
   for itr in range(n_iter):  # n_iter=1ï¼Œæ‰€ä»¥åªå¾ªç¯ä¸€æ¬¡
       # ... è®­ç»ƒè¿‡ç¨‹ ...
       self.perform_logging(itr, ...)  # itr=0ï¼Œè®°å½•åˆ° Step=0
   ```

3. **è®°å½•æ—¶æœº**ï¼š
   - æŒ‡æ ‡åªåœ¨**æ¯æ¬¡è¿­ä»£ç»“æŸå**è®°å½•ä¸€æ¬¡
   - `n_iter=1` æ„å‘³ç€åªæœ‰ä¸€æ¬¡è¿­ä»£
   - æ‰€ä»¥åªæœ‰ä¸€ä¸ªæ•°æ®ç‚¹ï¼ˆStep=0ï¼‰

**å¦‚ä½•çœ‹åˆ°æ›²çº¿ï¼Ÿ**

å¦‚æœä½ æƒ³çœ‹åˆ°è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ›²çº¿ï¼Œéœ€è¦ï¼š

**æ–¹æ³• 1ï¼šå¢åŠ è¿­ä»£æ¬¡æ•°**ï¼ˆç”¨äº DAggerï¼Œä¸æ˜¯ BCï¼‰
```bash
--n_iter 10  # è¿è¡Œ 10 æ¬¡è¿­ä»£ï¼Œä¼šæœ‰ 10 ä¸ªæ•°æ®ç‚¹
```

**æ–¹æ³• 2ï¼šåœ¨è®­ç»ƒå¾ªç¯ä¸­è®°å½•ä¸­é—´æ­¥éª¤**ï¼ˆéœ€è¦ä¿®æ”¹ä»£ç ï¼‰
```python
# åœ¨ train_agent() ä¸­ï¼Œæ¯æ¬¡æ¢¯åº¦æ›´æ–°åè®°å½•
for train_step in range(num_steps):
    # ... è®­ç»ƒ ...
    if train_step % 100 == 0:  # æ¯ 100 æ­¥è®°å½•ä¸€æ¬¡
        self.logger.log_scalar(loss, 'Training_Loss', train_step)
```

**ä¸ºä»€ä¹ˆ BC é€šå¸¸åªç”¨ 1 æ¬¡è¿­ä»£ï¼Ÿ**

- BC æ˜¯**ç¦»çº¿å­¦ä¹ **ï¼šä¸€æ¬¡æ€§ä½¿ç”¨æ‰€æœ‰ä¸“å®¶æ•°æ®è®­ç»ƒ
- ä¸éœ€è¦å¤šæ¬¡è¿­ä»£æ”¶é›†æ–°æ•°æ®
- DAgger æ‰éœ€è¦å¤šæ¬¡è¿­ä»£ï¼ˆåœ¨çº¿å­¦ä¹ ï¼‰

### 3. **è®°å½•çš„æŒ‡æ ‡**

æ ¹æ®ä»£ç ï¼ˆ`bc_trainer.py` çš„ `perform_logging` å‡½æ•°ï¼‰ï¼Œè¿™ä¸ªæ–‡ä»¶è®°å½•äº†ï¼š

#### è¯„ä¼°æŒ‡æ ‡ï¼ˆEvalï¼‰
- `Eval_AverageReturn`ï¼šè¯„ä¼°æ—¶çš„å¹³å‡å›æŠ¥
- `Eval_StdReturn`ï¼šè¯„ä¼°å›æŠ¥çš„æ ‡å‡†å·®
- `Eval_MaxReturn`ï¼šæœ€å¤§å›æŠ¥
- `Eval_MinReturn`ï¼šæœ€å°å›æŠ¥
- `Eval_AverageEpLen`ï¼šå¹³å‡è½¨è¿¹é•¿åº¦

#### è®­ç»ƒæŒ‡æ ‡ï¼ˆTrainï¼‰
- `Train_AverageReturn`ï¼šè®­ç»ƒæ•°æ®çš„å¹³å‡å›æŠ¥
- `Train_StdReturn`ï¼šè®­ç»ƒå›æŠ¥çš„æ ‡å‡†å·®
- `Train_MaxReturn`ï¼šæœ€å¤§å›æŠ¥
- `Train_MinReturn`ï¼šæœ€å°å›æŠ¥
- `Train_AverageEpLen`ï¼šå¹³å‡è½¨è¿¹é•¿åº¦

#### å…¶ä»–æŒ‡æ ‡
- `Train_EnvstepsSoFar`ï¼šæ€»çš„ç¯å¢ƒæ­¥æ•°
- `TimeSinceStart`ï¼šè®­ç»ƒæ—¶é—´
- `Training_Loss`ï¼šè®­ç»ƒæŸå¤±
- `Initial_DataCollection_AverageReturn`ï¼šåˆå§‹æ•°æ®æ”¶é›†çš„å¹³å‡å›æŠ¥

## ğŸ” å¦‚ä½•æŸ¥çœ‹æ—¥å¿—

### æ–¹æ³• 1ï¼šä½¿ç”¨ TensorBoardï¼ˆæ¨èï¼‰

```bash
# å¯åŠ¨ TensorBoard
tensorboard --logdir=data/q1_bc_hopper_Hopper-v4_03-01-2026_10-56-10

# ç„¶ååœ¨æµè§ˆå™¨æ‰“å¼€ http://localhost:6006
```

### æ–¹æ³• 2ï¼šä½¿ç”¨ Python è¯»å–

```python
from tensorboard.backend.event_processing import event_accumulator

ea = event_accumulator.EventAccumulator('data/q1_bc_ant_Ant-v4_03-01-2026_12-49-49/')
ea.Reload()

# è·å–æ‰€æœ‰æ ‡é‡æŒ‡æ ‡
scalars = ea.Tags()['scalars']

# è¯»å–ç‰¹å®šæŒ‡æ ‡çš„æ•°æ®
eval_returns = ea.Scalars('Eval_AverageReturn')
for event in eval_returns:
    print(f"Step {event.step}: {event.value}")
```

## ğŸ“ˆ å®é™…æ•°æ®ç¤ºä¾‹

ä»æˆåŠŸçš„å®éªŒï¼ˆ`q1_bc_ant_Ant-v4_03-01-2026_10-52-00`ï¼‰å¯ä»¥çœ‹åˆ°ï¼š

```
Eval_AverageReturn: 4644.26
Eval_StdReturn: 98.19
Train_AverageReturn: 4713.65
Training_Loss: -1.96
```

## ğŸ’¡ ä¸ºä»€ä¹ˆæœ‰äº›æ–‡ä»¶å¾ˆå°ï¼Ÿ

å¦‚æœæ–‡ä»¶åªæœ‰ 40 å­—èŠ‚ï¼Œå¯èƒ½çš„åŸå› ï¼š
1. **å®éªŒè¢«ä¸­æ–­**ï¼šè®­ç»ƒè¿˜æ²¡å®Œæˆå°±è¢«åœæ­¢äº†
2. **æ²¡æœ‰è®°å½•æ•°æ®**ï¼šå¯èƒ½ `video_log_freq=-1` ä¸”æŸäº›æ¡ä»¶æœªæ»¡è¶³
3. **å†™å…¥å¤±è´¥**ï¼šTensorBoard writer å¯èƒ½æ²¡æœ‰æ­£ç¡®åˆ·æ–°

## ğŸ¯ ç”¨é€”

è¿™äº›æ—¥å¿—æ–‡ä»¶ç”¨äºï¼š
- **å¯è§†åŒ–è®­ç»ƒè¿‡ç¨‹**ï¼šç”¨ TensorBoard æŸ¥çœ‹æŸå¤±æ›²çº¿ã€æ€§èƒ½æ›²çº¿
- **å¯¹æ¯”ä¸åŒå®éªŒ**ï¼šæ¯”è¾ƒä¸åŒè¶…å‚æ•°çš„æ•ˆæœ
- **è°ƒè¯•**ï¼šæ‰¾å‡ºè®­ç»ƒä¸­çš„é—®é¢˜
- **æŠ¥å‘Š**ï¼šæå–æ•°æ®åˆ¶ä½œè¡¨æ ¼å’Œå›¾è¡¨

